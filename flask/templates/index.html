<html>
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
			  integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

		<title>WEBCAM STREAMING</title>
		<script src="https://cdn.socket.io/4.0.1/socket.io.min.js"></script>
    	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-lg-8  offset-lg-2">
				<h3 class="mt-5">Live Streaming</h3> 	<!-- mt-5는 공백을 주기 위한 것 -->
<!--				<img id="video_feed" src="{{ url_for('video_feed', client_id='your_client_id') }}" width="100%">-->
				<img id="video_feed" src="{{ url_for('video_feed', client_id='your_client_id') }}" width="100%">
			</div>
			<div class="col-lg-8  offset-lg-2">
				<a href="{{ url_for('push_capture') }}"><input type="button" value="캡쳐" ></a>
				<a href="{{ url_for('push_record') }}"><input type="button" value="녹화/정지" ></a>
				<b>	{% if is_record!=0 %} 녹화중
					{% elif is_record==0 %} 녹화대기
					{% endif %}
				</b>
			</div>
		</div>
	</div>
<script>
	var socket = io.connect('http://localhost:8080');

        var video = document.getElementById('video_feed');

        socket.on('connect', function () {
            console.log('서버에 연결됨');
        });

        socket.on('disconnect', function () {
            console.log('서버에서 연결 해제됨');
        });

        socket.on('frame', function (frame) {
            video.src = 'data:image/jpeg;base64,' + frame;
        });
</script>
</body>
</html>